// Copyright (c) 2026 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-bigint-support@v0.2.3-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.3-esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@v0.2.4-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-bytes-per-element@v0.3.1-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-iteration-order@v0.2.3-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-strides2order@v0.2.3-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-slice@v0.3.1-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/boolean-ctor@v0.2.3-esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-minmax-view-buffer-index@v0.2.3-esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-column-major-string@v0.1.1-esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-assert-is-complex-floating-point-data-type@v0.3.1-esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float64-real@v0.1.2-esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/complex-float64-imag@v0.1.2-esm/index.mjs";import{isPrimitive as l}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@v0.2.3-esm/index.mjs";import{primitives as p}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string-array@v0.2.3-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@v0.2.3-esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.3-esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/string-replace@v0.2.3-esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-join@v0.1.2-esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-little-endian@v0.2.3-esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/array-buffer@v0.2.3-esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/array-dataview@v0.2.3-esm/index.mjs";import O from"https://cdn.jsdelivr.net/gh/stdlib-js/bigint-ctor@v0.2.3-esm/index.mjs";import x from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-base-dtype-enums@v0.1.1-esm/index.mjs";import{enum as w}from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-orders@v0.2.3-esm/index.mjs";import{enum as L}from"https://cdn.jsdelivr.net/gh/stdlib-js/ndarray-index-modes@v0.2.3-esm/index.mjs";import I from"https://cdn.jsdelivr.net/gh/stdlib-js/array-uint8@v0.2.3-esm/index.mjs";import{assign as A}from"https://cdn.jsdelivr.net/gh/stdlib-js/number-float64-base-to-int64-bytes@v0.2.3-esm/index.mjs";function U(t,s){return s&&(2===t||3===t)}function E(t,s){return s&&(1===t||3===t)}var N={int8:"new Int8Array( [ {{data}} ] )",uint8:"new Uint8Array( [ {{data}} ] )",uint8c:"new Uint8ClampedArray( [ {{data}} ] )",int16:"new Int16Array( [ {{data}} ] )",uint16:"new Uint16Array( [ {{data}} ] )",int32:"new Int32Array( [ {{data}} ] )",uint32:"new Uint32Array( [ {{data}} ] )",float32:"new Float32Array( [ {{data}} ] )",float64:"new Float64Array( [ {{data}} ] )",generic:"[ {{data}} ]",binary:"new Buffer( [ {{data}} ] )",complex64:"new Complex64Array( [ {{data}} ] )",complex128:"new Complex128Array( [ {{data}} ] )",bool:"new BooleanArray( [ {{data}} ] )"};var S=x(),R=w(),C=L();var M=x(),T=w(),J=L();function B(t,s,e,o,d,f){var _,m,l,p,u;if(!(this instanceof B))return new B(t,s,e,o,d,f);for(p=1,u=0;u<e.length;u++)p*=e[u];return m=s.BYTES_PER_ELEMENT?s.BYTES_PER_ELEMENT*p:null,this._byteLength=m,this._bytesPerElement=i(t),this._buffer=s,this._dtype=t,this._length=p,this._ndims=e.length,this._offset=d,this._order=f,this._shape=e,this._strides=o,this._accessors=h(s.get&&s.set),this._iterationOrder=r(o),_=function(t,s,e,i,r){var n;return 0!==t&&0!==r&&t===(n=a(s,e,i))[1]-n[0]+1}(p,e,o,d,this._iterationOrder),l=n(o),this._flags={ROW_MAJOR_CONTIGUOUS:E(l,_),COLUMN_MAJOR_CONTIGUOUS:U(l,_),READONLY:!1},this.__meta_dataview__=null,this}s(B,"name","ndarray"),e(B.prototype,"byteLength",(function(){return this._byteLength})),e(B.prototype,"BYTES_PER_ELEMENT",(function(){return this._bytesPerElement})),e(B.prototype,"data",(function(){return this._buffer})),e(B.prototype,"dtype",(function(){return this._dtype})),e(B.prototype,"flags",(function(){return{ROW_MAJOR_CONTIGUOUS:(t=this._flags).ROW_MAJOR_CONTIGUOUS,COLUMN_MAJOR_CONTIGUOUS:t.COLUMN_MAJOR_CONTIGUOUS,READONLY:t.READONLY};var t})),e(B.prototype,"length",(function(){return this._length})),e(B.prototype,"ndims",(function(){return this._ndims})),e(B.prototype,"offset",(function(){return this._offset})),e(B.prototype,"order",(function(){return this._order})),e(B.prototype,"shape",(function(){return o(this._shape,0,this._shape.length)})),e(B.prototype,"strides",(function(){return o(this._strides,0,this._strides.length)})),s(B.prototype,"get",(function(){var t,s;for(t=this._offset,s=0;s<arguments.length;s++)t+=this._strides[s]*arguments[s];return this._accessors?this._buffer.get(t):this._buffer[t]})),s(B.prototype,"iget",(function(t){var s,e,i,r,n,o;if(0===(i=this._ndims))return this._accessors?this._buffer.get(this._offset):this._buffer[this._offset];if(this._flags.ROW_MAJOR_CONTIGUOUS||this._flags.COLUMN_MAJOR_CONTIGUOUS){if(1===this._iterationOrder)return this._accessors?this._buffer.get(this._offset+t):this._buffer[this._offset+t];if(-1===this._iterationOrder)return this._accessors?this._buffer.get(this.offset-t):this._buffer[this._offset-t]}if(e=this._shape,s=this._strides,r=this._offset,d(this._order)){for(o=0;o<i;o++)t-=n=t%e[o],t/=e[o],r+=n*s[o];return this._accessors?this._buffer.get(r):this._buffer[r]}for(o=i-1;o>=0;o--)t-=n=t%e[o],t/=e[o],r+=n*s[o];return this._accessors?this._buffer.get(r):this._buffer[r]})),s(B.prototype,"set",(function(){var t,s;for(t=this._offset,s=0;s<arguments.length-1;s++)t+=this._strides[s]*arguments[s];return this._accessors?this._buffer.set(arguments[s],t):this._buffer[t]=arguments[s],this})),s(B.prototype,"iset",(function(t,s){var e,i,r,n,o,h;if(0===(r=this._ndims))return this._accessors?this._buffer.set(t,this._offset):this._buffer[this._offset]=t,this;if(this._flags.ROW_MAJOR_CONTIGUOUS||this._flags.COLUMN_MAJOR_CONTIGUOUS){if(1===this._iterationOrder)return this._accessors?this._buffer.set(s,this._offset+t):this._buffer[this._offset+t]=s,this;if(-1===this._iterationOrder)return this._accessors?this._buffer.set(s,this._offset-t):this._buffer[this._offset-t]=s,this}if(i=this._shape,e=this._strides,n=this._offset,d(this._order)){for(h=0;h<r;h++)t-=o=t%i[h],t/=i[h],n+=o*e[h];return this._accessors?this._buffer.set(s,n):this._buffer[n]=s,this}for(h=r-1;h>=0;h--)t-=o=t%i[h],t/=i[h],n+=o*e[h];return this._accessors?this._buffer.set(s,n):this._buffer[n]=s,this})),s(B.prototype,"toString",(function(){return this.toLocaleString()})),s(B.prototype,"toLocaleString",(function(t,s){var e,i,r,n,o,h,a,d,j,y;if(0===arguments.length)h=[];else{if(!l(t)&&!p(t))throw new TypeError(g("invalid argument. First argument must be a string or an array of strings. Value: `%s`.",t));h=t}if(arguments.length<2)o={};else{if(!u(s))throw new TypeError(g("0iN2V",s));o=s}if(r=this._shape.length,d=this._dtype,e=f(d),a=g("ndarray( '%s', ",String(d)),i="",this._length<=100)if(e)for(y=0;y<this._length;y++)j=this.iget(y),i+=_(j).toLocaleString(h,o)+", "+m(j).toLocaleString(h,o),y<this._length-1&&(i+=", ");else for(y=0;y<this._length;y++)i+=this.iget(y).toLocaleString(h,o),y<this._length-1&&(i+=", ");else{if(e)for(y=0;y<3;y++)j=this.iget(y),i+=_(j).toLocaleString(h,o)+", "+m(j).toLocaleString(h,o),y<2&&(i+=", ");else for(y=0;y<3;y++)i+=this.iget(y).toLocaleString(h,o),y<2&&(i+=", ");if(i+=", ..., ",e)for(y=2;y>=0;y--)j=this.iget(this._length-1-y),i+=_(j).toLocaleString(h,o)+", "+m(j).toLocaleString(h,o),y>0&&(i+=", ");else for(y=2;y>=0;y--)i+=this.iget(this._length-1-y).toLocaleString(h,o),y>0&&(i+=", ")}if(n=N[this.dtype],a+=c(n,"{{data}}",i),a+=", ",a+=0===r?"[]":g("[ %s ]",b(this._shape,", ")),a+=", ",a+="[ ",0===r)a+="0";else for(y=0;y<r;y++)this._strides[y]<0?a+=-this._strides[y]:a+=this._strides[y],y<r-1&&(a+=", ");return a+=" ]",a+=", ",a+="0",a+=", ",a+=g("'%s'",this._order),a+=" )"})),s(B.prototype,"toJSON",(function(){var t,s,e,i;for(s=this._length,(t={}).type="ndarray",t.dtype=this.dtype,t.flags={READONLY:this._flags.READONLY},t.order=this._order,t.shape=this._shape.slice(),t.strides=this._strides.slice(),i=0;i<t.strides.length;i++)t.strides[i]<0&&(t.strides[i]*=-1);if(t.data=[],f(t.dtype))for(i=0;i<s;i++)e=this.iget(i),t.data.push(_(e),m(e));else for(i=0;i<s;i++)t.data.push(this.iget(i));return t})),s(B.prototype,"valueOf",(function(){return 0===this._ndims?this.iget():this})),s(B.prototype,"__array_meta_dataview__",t()?function(){var t,s,e,i,r,n,o,h,a,d,f,_,m,l;if(a=this._mode||"throw",o=this._submode||[a],e=33+16*(_=this._ndims)+(m=o.length),(h=this.__meta_dataview__)&&h.byteLength===e)return h;for(h=new v(new y(e)),r=this._shape,n=this._strides,i=this._dtype,t=this._bytesPerElement,d=0,h.setInt8(d,j?1:0),d+=1,h.setInt16(d,S[i],j),d+=2,h.setBigInt64(d,O(_),j),f=8*_,d+=8,l=0;l<_;l++)h.setBigInt64(d,O(r[l]),j),h.setBigInt64(d+f,O(n[l]*t),j),d+=8;for(d+=f,h.setBigInt64(d,O(this._offset*t),j),d+=8,h.setInt8(d,R[this._order]),d+=1,h.setInt8(d,C[a]),d+=1,h.setBigInt64(d,O(m),j),d+=8,l=0;l<m;l++)h.setInt8(d,C[o[l]]),d+=1;return s=0,s|=this._flags.READONLY?4:0,h.setInt32(d,s,j),this.__meta_dataview__=h,h}:function(){var t,s,e,i,r,n,o,h,a,d,f,_,m,l,p;if(d=this._mode||"throw",h=this._submode||[d],i=33+16*(m=this._ndims)+(l=h.length),(a=this.__meta_dataview__)&&a.byteLength===i)return a;for(a=new v(new y(i)),s=new I(a.buffer),n=this._shape,o=this._strides,r=this._dtype,t=this._bytesPerElement,f=0,a.setInt8(f,j?1:0),f+=1,a.setInt16(f,M[r],j),A(m,s,1,f+=2),_=8*m,f+=8,p=0;p<m;p++)A(n[p],s,1,f),A(o[p]*t,s,1,f+_),f+=8;for(f+=_,A(this._offset*t,s,1,f),f+=8,a.setInt8(f,T[this._order]),f+=1,a.setInt8(f,J[d]),A(l,s,1,f+=1),f+=8,p=0;p<l;p++)a.setInt8(f,J[h[p]]),f+=1;return e=0,e|=this._flags.READONLY?4:0,a.setInt32(f,e,j),this.__meta_dataview__=a,a});export{B as default};
//# sourceMappingURL=index.mjs.map
